CREATE OR REPLACE PACKAGE PKG_DEPARTMENTS IS
PROCEDURE PRC_INS_DEPARTMENTS (P_DEPARTMENTS DEPARTMENTS%ROWTYPE,P_SALVA BOOLEAN DEFAULT FALSE) IS BEGIN

      --INSERT INTO DEPARTMENTS VALUES P_DEPARTMENTS;
      IF P_SALVA THEN
         COMMIT;
      END IF;

      NULL;
   END;

   PROCEDURE PRC_INS_DEPARTMENTS2 (P_DEPARTMENT_ID   DEPARTMENTS.DEPARTMENT_ID%TYPE,
                              P_DEPARTMENT_NAME DEPARTMENTS.DEPARTMENT_NAME%TYPE,
                              P_LOCATION_ID     DEPARTMENTS.LOCATION_ID%TYPE,
                              P_MANAGER_ID      DEPARTMENTS.MANAGER_ID%TYPE,
                              P_SALVA BOOLEAN DEFAULT FALSE ) IS
   BEGIN
      PKG_VARIAVEIS.V_DEPARTMENTS.DEPARTMENT_ID   := P_DEPARTMENT_ID;
      PKG_VARIAVEIS.V_DEPARTMENTS.DEPARTMENT_NAME := P_DEPARTMENT_NAME;
      PKG_VARIAVEIS.V_DEPARTMENTS.MANAGER_ID       := P_MANAGER_ID;
      PKG_VARIAVEIS.V_DEPARTMENTS.LOCATION_ID      := P_LOCATION_ID;
      PRC_INS_DEPARTMENTS(PKG_VARIAVEIS.V_DEPARTMENTS, P_SALVA);
   END;
   PROCEDURE PRC_UPD_DEPARTMENTS (P_DEPARTMENTS     DEPARTMENTS%ROWTYPE,
                              P_SALVA BOOLEAN DEFAULT FALSE) IS BEGIN
       UPDATE DEPARTMENTS SET ROW = P_DEPARTMENTS
       WHERE DEPARTMENT_ID = DEPARTMENTS.DEPARTMENT_ID;
       IF P_SALVA AND SQL%ROWCOUNT > 0 THEN
         COMMIT;
       END IF;
   END;       
   PROCEDURE PRC_DEL_DEPARTMENTS (P_DEPARTMENT_ID   DEPARTMENTS.DEPARTMENT_ID%TYPE,
                              P_SALVA BOOLEAN DEFAULT FALSE) IS
   BEGIN
       DELETE FROM DEPARTMENTS
       WHERE DEPARTMENT_ID = P_DEPARTMENT_ID;
       IF P_SALVA AND SQL%ROWCOUNT > 0 THEN
         COMMIT;
       END IF;
   END;

   FUNCTION FUN_SEL_DEPARTMENT_NAME(P_DEPARTMENT_ID   DEPARTMENTS.DEPARTMENT_ID%TYPE)
   RETURN  DEPARTMENTS.DEPARTMENT_NAME%TYPE IS
   CURSOR C_DEPT IS  SELECT * FROM DEPARTMENTS WHERE DEPARTMENT_ID = P_DEPARTMENT_ID;
   BEGIN
      FOR V_DEPARTMENTS IN C_DEPT LOOP
        RETURN V_DEPARTMENTS.DEPARTMENT_NAME;
      END LOOP;
      RETURN NULL;
   END;

   FUNCTION FUN_SEL_DEPARTMENT_ID(P_DEPARTMENT_NAME   DEPARTMENTS.DEPARTMENT_NAME%TYPE)
   RETURN  DEPARTMENTS.DEPARTMENT_ID%TYPE IS
   CURSOR C_DEPT IS  SELECT * FROM DEPARTMENTS 
   WHERE DEPARTMENT_NAME = P_DEPARTMENT_NAME;
   BEGIN
      FOR V_DEPARTMENTS IN C_DEPT LOOP
        RETURN V_DEPARTMENTS.DEPARTMENT_ID;
      END LOOP;
      RETURN NULL;
   END;

END;









 
