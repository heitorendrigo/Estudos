SET SERVEROUTPUT ON;
DECLARE
  V_EMPLOYEES EMPLOYEES%ROWTYPE;
BEGIN
   SELECT *
     INTO V_EMPLOYEES
     FROM EMPLOYEES
    WHERE EMPLOYEE_ID = &EMPLOYEE_ID;
EXCEPTION
   WHEN NO_DATA_FOUND THEN
      DBMS_OUTPUT.PUT_LINE('EMPREGADO NAO ENCONTRADO');
END;
   

-- FUNCAO
CREATE OR REPLACE FUNCTION FUN_CONSULTA_EMPLOYEES
(P_EMPLOYEE_ID    EMPLOYEES.EMPLOYEE_ID%TYPE) 
RETURN VARCHAR2 IS
  V_EMPLOYEES EMPLOYEES%ROWTYPE;
BEGIN
   SELECT *
     INTO V_EMPLOYEES
     FROM EMPLOYEES
    WHERE EMPLOYEE_ID = P_EMPLOYEE_ID;
   RETURN V_EMPLOYEES.FIRST_NAME;
EXCEPTION
   WHEN NO_DATA_FOUND THEN
      RETURN 'EMP NAO ENCONTRADO';
END;

SELECT FUN_CONSULTA_EMPLOYEES(5000) FROM DUAL;

VARIABLE V_NOME  VARCHAR2(50);
EXECUTE :V_NOME := FUN_CONSULTA_EMPLOYEES(100);
PRINT V_NOME

SET SERVEROUTPUT ON;
EXECUTE DBMS_OUTPUT.PUT_LINE(FUN_CONSULTA_EMPLOYEES(100));


--MESMO EXEMPLO COMO PROCEDURE
CREATE OR REPLACE PROCEDURE PRC_CONSULTA_EMPLOYEES
(P_EMPLOYEE_ID       EMPLOYEES.EMPLOYEE_ID%TYPE,
 P_FIRST_NAME   OUT  EMPLOYEES.FIRST_NAME%TYPE) IS
  V_EMPLOYEES EMPLOYEES%ROWTYPE;
BEGIN
   SELECT *
     INTO V_EMPLOYEES
     FROM EMPLOYEES
    WHERE EMPLOYEE_ID = P_EMPLOYEE_ID;
   P_FIRST_NAME := V_EMPLOYEES.FIRST_NAME;
EXCEPTION
   WHEN NO_DATA_FOUND THEN
     P_FIRST_NAME := 'EMPREGADO NAO ENCONTRADO';
END;


--
DECLARE
  V_FIRST_NAME   DEPARTMENTS.FIRST_NAME%TYPE;
BEGIN
  PRC_CONSULTA_EMPLOYEES(1000,V_FIRST_NAME);
  DBMS_OUTPUT.PUT_LINE(V_FIRST_NAME);
END;